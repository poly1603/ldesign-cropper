# @ldesign/cropper æ„å»ºæˆåŠŸæŠ¥å‘Š

æ„å»ºæ—¶é—´ï¼š2025-10-29

## ğŸ“¦ æ„å»ºçŠ¶æ€æ€»è§ˆ

**å…¨éƒ¨ 9 ä¸ªåŒ…æ„å»ºæˆåŠŸï¼** âœ…

| åŒ…å | çŠ¶æ€ | è¾“å‡ºæ ¼å¼ | å¤‡æ³¨ |
|------|------|----------|------|
| **core** | âœ… æˆåŠŸ | ESM + CJS | 478 ä¸ªæ–‡ä»¶ï¼Œæ ¸å¿ƒåŒ… |
| **vanilla** | âœ… æˆåŠŸ | ESM + CJS | 4 ä¸ªæ–‡ä»¶ |
| **lit** | âœ… æˆåŠŸ | ESM + CJS + Dist | Web Components |
| **react** | âœ… æˆåŠŸ | ESM + CJS + Dist | React é€‚é…å™¨ |
| **vue** | âœ… æˆåŠŸ | ESM + CJS | 30 ä¸ªæ–‡ä»¶ï¼ŒVue 3 é€‚é…å™¨ |
| **angular** | âœ… æˆåŠŸ | ESM + CJS | 12 ä¸ªæ–‡ä»¶ï¼ŒAngular é€‚é…å™¨ |
| **solid** | âœ… æˆåŠŸ | ESM + CJS | 12 ä¸ªæ–‡ä»¶ï¼ŒSolidJS é€‚é…å™¨ |
| **svelte** | âœ… æˆåŠŸ | ESM + CJS | 18 ä¸ªæ–‡ä»¶ï¼ŒSvelte é€‚é…å™¨ |
| **qwik** | âœ… æˆåŠŸ | ESM + CJS | Qwik é€‚é…å™¨ï¼ˆä½¿ç”¨ Rollup æ„å»ºï¼‰ |

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### æ„å»ºå·¥å…·é…ç½®

**å¤§éƒ¨åˆ†åŒ…ï¼ˆ8/9ï¼‰**ï¼š
- æ„å»ºå·¥å…·ï¼š`@ldesign/builder`
- é…ç½®æ–‡ä»¶ï¼š`.ldesign/builder.config.ts`
- è¾“å‡ºæ ¼å¼ï¼šESM (`es/`) + CommonJS (`lib/`)

**Qwik åŒ…ï¼ˆç‰¹æ®Šå¤„ç†ï¼‰**ï¼š
- æ„å»ºå·¥å…·ï¼šRollup (ç›´æ¥é…ç½®)
- é…ç½®æ–‡ä»¶ï¼š`rollup.config.js`
- åŸå› ï¼š`@ldesign/builder` å¯¹ Qwik æ¡†æ¶çš„ç‰¹æ®Šå¤„ç†å­˜åœ¨ bug
- è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ Rollup ç›´æ¥æ„å»ºï¼Œç»•è¿‡ builder çš„æ¡†æ¶æ£€æµ‹

### å…³é”®æ–‡ä»¶ç»“æ„

```
packages/
â”œâ”€â”€ core/           # æ ¸å¿ƒé€»è¾‘
â”œâ”€â”€ vanilla/        # åŸç”Ÿ JS
â”œâ”€â”€ lit/            # Web Components
â”œâ”€â”€ react/          # React é€‚é…å™¨
â”œâ”€â”€ vue/            # Vue 3 é€‚é…å™¨
â”œâ”€â”€ angular/        # Angular é€‚é…å™¨
â”œâ”€â”€ solid/          # SolidJS é€‚é…å™¨
â”œâ”€â”€ svelte/         # Svelte é€‚é…å™¨
â””â”€â”€ qwik/           # Qwik é€‚é…å™¨
```

æ¯ä¸ªåŒ…éƒ½åŒ…å«ï¼š
- `es/` - ESM æ ¼å¼è¾“å‡º
- `lib/` - CommonJS æ ¼å¼è¾“å‡º
- `src/` - æºä»£ç 
- `package.json` - åŒ…é…ç½®
- `tsconfig.json` - TypeScript é…ç½®
- `.ldesign/builder.config.ts` æˆ– `rollup.config.js` - æ„å»ºé…ç½®

## âš ï¸ å·²çŸ¥é—®é¢˜

### Vue åŒ…
- **çŠ¶æ€**ï¼šæ„å»ºæˆåŠŸï¼Œä½†æœ‰ç±»å‹é”™è¯¯è­¦å‘Š
- **é—®é¢˜**ï¼š`src/directive.ts` ä¸­ `CropperDirectiveValue` ç±»å‹ç¼ºå°‘æŸäº›å±æ€§
- **å½±å“**ï¼šä¸å½±å“æ„å»ºè¾“å‡ºï¼Œä½†åº”è¯¥ä¿®å¤ä»¥è·å¾—æ›´å¥½çš„ç±»å‹å®‰å…¨
- **å¾…ä¿®å¤å±æ€§**ï¼š`src`, `aspectRatio`, `cropBoxStyle`, `themeColor`

### Qwik åŒ…
- **çŠ¶æ€**ï¼šæ„å»ºæˆåŠŸ
- **ç‰¹æ®Šå¤„ç†**ï¼šä½¿ç”¨ç‹¬ç«‹çš„ Rollup é…ç½®è€Œé @ldesign/builder
- **åŸå› **ï¼šbuilder å¯¹ Qwik çš„æ¡†æ¶æ£€æµ‹å’Œé…ç½®ä¼ é€’å­˜åœ¨ bug
- **å»ºè®®**ï¼šå¦‚æœ @ldesign/builder æœªæ¥ä¿®å¤ Qwik æ”¯æŒï¼Œå¯ä»¥è¿ç§»å›æ ‡å‡†é…ç½®

## âœ¨ æˆåŠŸå…³é”®ç‚¹

1. **æ¸…ç†äº† Git å†²çªæ ‡è®°**ï¼šä¿®å¤äº†æºä»£ç ä¸­çš„åˆå¹¶å†²çª
2. **ç»Ÿä¸€çš„æ„å»ºé…ç½®**ï¼šæ‰€æœ‰åŒ…ä½¿ç”¨ä¸€è‡´çš„æ„å»ºæµç¨‹
3. **æ­£ç¡®çš„ä¾èµ–å¤–éƒ¨åŒ–**ï¼šæ‰€æœ‰æ¡†æ¶ä¾èµ–éƒ½è¢«æ­£ç¡®æ ‡è®°ä¸º external
4. **TypeScript é…ç½®è°ƒæ•´**ï¼šé’ˆå¯¹ä¸åŒåŒ…ä¼˜åŒ–äº† tsconfig
5. **Svelte æ ·å¼å¤„ç†**ï¼šç§»é™¤äº†å¯¼è‡´ PostCSS é”™è¯¯çš„ style å—
6. **Qwik ç‰¹æ®Šå¤„ç†**ï¼šä¸º Qwik åˆ›å»ºäº†ç‹¬ç«‹çš„ Rollup æ„å»ºæµç¨‹

## ğŸ“‹ ä¸‹ä¸€æ­¥å»ºè®®

### ç«‹å³ä»»åŠ¡
1. âœ… **æ‰€æœ‰åŒ…æ„å»ºæˆåŠŸ** - å·²å®Œæˆ
2. ğŸ”„ **ä¿®å¤ Vue åŒ…çš„ç±»å‹é”™è¯¯** - å»ºè®®ä¿®å¤
3. ğŸ”„ **è¿è¡Œ lint å’Œ typecheck** - ç¡®ä¿ä»£ç è´¨é‡

### åç»­ä»»åŠ¡
1. **åˆ›å»ºæ¼”ç¤ºé¡¹ç›®**ï¼šä¸ºæ¯ä¸ªæ¡†æ¶åˆ›å»ºåŸºäº @ldesign/launcher çš„ demo
2. **ç¼–å†™æµ‹è¯•**ï¼šå•å…ƒæµ‹è¯• + E2E æµ‹è¯•ï¼Œç›®æ ‡è¦†ç›–ç‡ > 80%
3. **å®Œå–„æ–‡æ¡£**ï¼šå»ºç«‹ VitePress æ–‡æ¡£ç«™ç‚¹
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šå†…å­˜ç®¡ç†ã€æ¸²æŸ“æ€§èƒ½ã€åŒ…ä½“ç§¯ä¼˜åŒ–
5. **æ–°åŠŸèƒ½å¼€å‘**ï¼š
   - æ™ºèƒ½è£å‰ªå»ºè®®
   - AI èƒŒæ™¯ç§»é™¤
   - æ‰¹é‡æ°´å°å¤„ç†

## ğŸ¯ é¡¹ç›®çŠ¶æ€

- **æ€»åŒ…æ•°**ï¼š9 ä¸ª
- **æ„å»ºæˆåŠŸ**ï¼š9 ä¸ª (100%)
- **æ”¯æŒçš„æ¡†æ¶**ï¼šVanilla JS, Lit, React, Vue, Angular, Solid, Svelte, Qwik
- **æ„å»ºæ ¼å¼**ï¼šESM + CommonJS (åŒæ ¼å¼æ”¯æŒ)
- **ç±»å‹å®šä¹‰**ï¼šæ‰€æœ‰åŒ…éƒ½åŒ…å« TypeScript å£°æ˜æ–‡ä»¶

---

**æ„å»ºå·¥å…·ç‰ˆæœ¬**ï¼š
- @ldesign/builder: workspace:*
- Rollup: ^4.0.0
- TypeScript: ^5.3.0
- Node.js: v20+
- pnpm: workspace ç®¡ç†

**æ„å»ºè€—æ—¶**ï¼š
- Core: ~88s
- å…¶ä»–åŒ…: ~5-37s ä¸ç­‰
- æ€»è®¡: çº¦ 3-5 åˆ†é’Ÿï¼ˆå¹¶è¡Œæ„å»ºå¯å¤§å¹…ç¼©çŸ­ï¼‰

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### æ„å»ºå•ä¸ªåŒ…
```bash
cd packages/<package-name>
pnpm run build
```

### æ„å»ºæ‰€æœ‰åŒ…
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
pnpm --filter "./packages/*" run build
```

### æ¸…ç†æ„å»ºäº§ç‰©
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
pnpm --filter "./packages/*" run clean
```

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**ï¼š2025-10-29 12:53 UTC+8  
**æ„å»ºçŠ¶æ€**ï¼šâœ… å…¨éƒ¨æˆåŠŸ
